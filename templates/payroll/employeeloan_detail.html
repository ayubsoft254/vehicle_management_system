{% extends 'base.html' %}
{% block title %}Employee Loan Details - Vehicle Management{% endblock %}

{% block content %}
<style>
    .employee-loan-container {
        padding: 2rem 1rem;
        background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
        min-height: 80vh;
    }
    
    .employee-loan-card {
        background: white;
        border-radius: 16px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        padding: 2.5rem;
        position: relative;
        overflow: hidden;
        max-width: 800px;
        margin: 0 auto;
    }
    
    .employee-loan-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 6px;
        background: linear-gradient(90deg, #2563eb 0%, #7e22ce 100%);
    }
    
    .employee-loan-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 2rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .employee-loan-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: #1e293b;
        margin: 0;
    }
    
    .status-badge {
        display: inline-block;
        padding: 0.5rem 1rem;
        border-radius: 50px;
        font-size: 0.9rem;
        font-weight: 600;
    }
    
    .status-repaid {
        background-color: #dcfce7;
        color: #166534;
    }
    
    .status-outstanding {
        background-color: #fef3c7;
        color: #92400e;
    }
    
    .details-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }
    
    .detail-card {
        padding: 1.5rem;
        background-color: #f8fafc;
        border-radius: 12px;
        border-left: 4px solid #2563eb;
    }
    
    .detail-card h3 {
        font-size: 1rem;
        color: #6b7280;
        margin-bottom: 1rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .detail-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.75rem;
        padding-bottom: 0.75rem;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .detail-item:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
    }
    
    .detail-label {
        font-weight: 500;
        color: #6b7280;
        flex: 1;
    }
    
    .detail-value {
        font-weight: 600;
        color: #1e293b;
        text-align: right;
        flex: 2;
    }
    
    .amount-card {
        background: linear-gradient(135deg, #f8fafc 0%, #e5e7eb 100%);
        border-radius: 12px;
        padding: 1.5rem;
        text-align: center;
        border: 1px solid #e5e7eb;
        margin-bottom: 2rem;
    }
    
    .amount-number {
        font-size: 2.5rem;
        font-weight: 700;
        color: #2563eb;
        margin-bottom: 0.5rem;
    }
    
    .amount-label {
        font-size: 1rem;
        color: #6b7280;
        font-weight: 500;
    }
    
    .back-btn {
        padding: 0.875rem 1.75rem;
        background: white;
        color: #6b7280;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none;
        margin-top: 2rem;
    }
    
    .back-btn:hover {
        background-color: #f9fafb;
        border-color: #9ca3af;
    }
    
    .additional-info {
        background-color: #f8fafc;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        border-left: 4px solid #7e22ce;
    }
    
    .additional-info h3 {
        font-size: 1rem;
        color: #6b7280;
        margin-bottom: 1rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    @media (max-width: 768px) {
        .employee-loan-header {
            flex-direction: column;
            gap: 1rem;
        }
        
        .details-grid {
            grid-template-columns: 1fr;
        }
        
        .detail-item {
            flex-direction: column;
            gap: 0.25rem;
        }
        
        .detail-value {
            text-align: left;
        }
    }
</style>

<div class="employee-loan-container">
    <div class="employee-loan-card">
        <div class="employee-loan-header">
            <h1 class="employee-loan-title">Employee Loan Details</h1>
            <span class="status-badge status-{% if employeeloan.is_repaid %}repaid{% else %}outstanding{% endif %}">
                <i class="fas fa-{% if employeeloan.is_repaid %}check-circle{% else %}exclamation-triangle{% endif %}"></i> 
                {% if employeeloan.is_repaid %}Repaid{% else %}Outstanding{% endif %}
            </span>
        </div>
        
        <div class="amount-card">
            <div class="amount-number">${{ employeeloan.amount }}</div>
            <div class="amount-label">Loan Amount</div>
        </div>
        
        <div class="details-grid">
            <div class="detail-card">
                <h3>Employee Information</h3>
                <div class="detail-item">
                    <span class="detail-label">Employee</span>
                    <span class="detail-value">{{ employeeloan.employee }}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Date</span>
                    <span class="detail-value">{{ employeeloan.date|date:'Y-m-d' }}</span>
                </div>
            </div>
            
            <div class="detail-card">
                <h3>Loan Status</h3>
                <div class="detail-item">
                    <span class="detail-label">Status</span>
                    <span class="detail-value">
                        {% if employeeloan.is_repaid %}
                        <span class="status-badge status-repaid">
                            <i class="fas fa-check-circle"></i> Repaid
                        </span>
                        {% else %}
                        <span class="status-badge status-outstanding">
                            <i class="fas fa-exclamation-triangle"></i> Outstanding
                        </span>
                        {% endif %}
                    </span>
                </div>
                {% if employeeloan.repayment_date %}
                <div class="detail-item">
                    <span class="detail-label">Repayment Date</span>
                    <span class="detail-value">{{ employeeloan.repayment_date|date:'Y-m-d' }}</span>
                </div>
                {% endif %}
            </div>
        </div>
        
        {% if employeeloan.notes or employeeloan.purpose %}
        <div class="additional-info">
            <h3>
                <i class="fas fa-info-circle"></i> Additional Information
            </h3>
            {% if employeeloan.purpose %}
            <div class="detail-item">
                <span class="detail-label">Purpose</span>
                <span class="detail-value">{{ employeeloan.purpose }}</span>
            </div>
            {% endif %}
            
            {% if employeeloan.notes %}
            <div class="detail-item">
                <span class="detail-label">Notes</span>
                <span class="detail-value" style="text-align: left; font-weight: normal;">{{ employeeloan.notes }}</span>
            </div>
            {% endif %}
        </div>
        {% endif %}
        
        <a href="{% url 'payroll:employeeloan-list' %}" class="back-btn">
            <i class="fas fa-arrow-left"></i> Back to Employee Loans
        </a>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add animation to the employee loan card
        const employeeLoanCard = document.querySelector('.employee-loan-card');
        employeeLoanCard.style.opacity = '0';
        employeeLoanCard.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
            employeeLoanCard.style.transition = 'opacity 0.5s ease, transform 极速赛车开奖直播 结果 历史记录 开奖网 开奖结果 开奖记录 开奖号码 开奖公告 开奖时间 开奖视频 开奖直播 开奖号码查询 开奖结果查询 开奖公告查询 开奖时间查询 开奖视频查询 开奖直播查询 开奖号码历史 开奖结果历史 开奖公告历史 开奖时间历史 开奖视频历史 开奖直播历史 开奖号码走势 开奖结果走势 开奖公告走势 开奖时间走势 开奖视频走势 开奖直播走势 0.5s ease';
            employeeLoanCard.style.opacity = '1';
            employeeLoanCard.style.transform = 'translateY(0)';
        }, 100);
        
        // Format currency amount
        const amountElement = document.querySelector('.amount-number');
        if (amountElement) {
            const amount = amountElement.textContent.replace('$', '');
            if (!isNaN(amount)) {
                amountElement.textContent = '$' + parseFloat(amount).toLocaleString('en-US', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                });
            }
        }
    });
</script>
{% endblock %}